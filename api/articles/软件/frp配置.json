{"title":"frp配置","slug":"软件/frp配置","date":"2023-11-20T09:25:31.000Z","updated":"2023-11-20T09:25:31.000Z","comments":true,"path":"api/articles/软件/frp配置.json","excerpt":null,"covers":null,"content":"<p>frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。 可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</p>\n<p>通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：</p>\n<p>1.客户端服务端通信支持 TCP、KCP 以及 Websocket 等多种协议。<br>2.采用 TCP 连接流式复用，在单个连接间承载更多请求，节省连接建立时间。<br>3.代理组间的负载均衡。<br>4.端口复用，多个服务通过同一个服务端端口暴露。<br>5.多个原生支持的客户端插件（静态文件查看，HTTP、SOCK5 代理等），便于独立使用 frp 客户端完成某些工作。 6.高度扩展性的服务端插件系统，方便结合自身需求进行功能扩展。<br>7.服务端和客户端 UI 页面。</p>\n<p>网址:FRP github网址 frp下载:<a href=\"https://github.com/fatedier/frp/releases\">releases</a></p>\n<p>linux版本选择linux版本,windows端可以下载windows版本，服务器和客户端尽量保持版本一致，当前最新版本为0.49.0</p>\n<p>1.服务端部署<br>1.1.linux部署<br>1.1.1 创建frp目录</p>\n<p><code>mkdir frp</code></p>\n<p>1.1.2 创建一个frp目录后,进入该目录，使用如下命令</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> frp</span><br><span class=\"line\">//进入创建的frp目录</span><br><span class=\"line\"></span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.49.0/frp_0.52.3_linux_amd64.tar.gz</span><br><span class=\"line\">//下载frp0.49版本服务端软件包</span><br><span class=\"line\"><span class=\"comment\">#若无wget命令,CentOS运行</span></span><br><span class=\"line\">yum install -y wget          //安装wget软件</span><br><span class=\"line\"><span class=\"comment\">#ubuntu或debian</span></span><br><span class=\"line\">apt install -y wget           //安装wget软件</span><br></pre></td></tr></table></figure>\n\n<p>1.1.3解压文件并进入解压文件夹</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf frp_0.52.3_linux_amd64.tar.gz  //解压文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span>  frp_0.52.3_linux_amd64    </span><br><span class=\"line\">//进入解压文件夹</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#编辑frps.ini文件</span></span><br><span class=\"line\">vim frps.ini                             //编辑frps.ini文件</span><br><span class=\"line\">编辑以下内容</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>修改</li>\n</ul>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"comment\"># 启用面板</span></span><br><span class=\"line\"><span class=\"attr\">dashboard_port</span> = <span class=\"number\">7500</span></span><br><span class=\"line\"><span class=\"comment\"># 面板登录名和密码</span></span><br><span class=\"line\"><span class=\"attr\">dashboard_user</span> = admin</span><br><span class=\"line\"><span class=\"attr\">dashboard_pwd</span> = xxxxxx</span><br><span class=\"line\"><span class=\"comment\"># 使用http代理并使用80端口进行穿透</span></span><br><span class=\"line\"><span class=\"attr\">vhost_http_port</span> = <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"comment\"># 使用https代理并使用443端口进行穿透</span></span><br><span class=\"line\"><span class=\"attr\">vhost_https_port</span> = <span class=\"number\">443</span></span><br><span class=\"line\"><span class=\"comment\"># 日志路径</span></span><br><span class=\"line\"><span class=\"attr\">log_file</span> = ./frps.log</span><br><span class=\"line\"><span class=\"comment\"># 日志级别</span></span><br><span class=\"line\"><span class=\"attr\">log_level</span> = info</span><br><span class=\"line\"><span class=\"comment\"># 日志最大保存天数</span></span><br><span class=\"line\"><span class=\"attr\">log_max_days</span> = <span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"comment\"># 认证超时时间</span></span><br><span class=\"line\"><span class=\"attr\">authentication_timeout</span> = <span class=\"number\">900</span></span><br><span class=\"line\"><span class=\"comment\"># 认证token，客户端需要和此对应</span></span><br><span class=\"line\"><span class=\"attr\">token</span>=<span class=\"number\">123123123</span></span><br><span class=\"line\"><span class=\"comment\"># 最大连接数</span></span><br><span class=\"line\"><span class=\"attr\">max_pool_count</span> = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"attr\">max_ports_per_client</span> = <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<p>1.1.5开放防火墙相关端口</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CentOS系统开放端口命令(云服务器也需要在安全组加入对应端口):</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --zone=public --add-port=7000/tcp --permanent   //开放7000端口</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=7500/tcp --permanent   //开放7500端口</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=80/tcp --permanent     //开放80端口</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=443/tcp --permanent    //开放443端口</span><br><span class=\"line\">firewall-cmd --reload                                        //使能防火墙生效</span><br><span class=\"line\">ubuntu或debian系统:</span><br><span class=\"line\"></span><br><span class=\"line\">ufw allow 80                 //开启80端口</span><br><span class=\"line\">ufw allow 443                //开启443端口</span><br><span class=\"line\">ufw allow 7000               //开启7000端口</span><br><span class=\"line\">ufw allow 7500               //开启7500端口</span><br><span class=\"line\">ufw <span class=\"built_in\">enable</span>                   //启动防火墙           </span><br><span class=\"line\">ufw <span class=\"built_in\">disable</span>                  //关闭防火墙</span><br></pre></td></tr></table></figure>\n\n<p>1.1.6启动服务几种方式</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#正常启动</span></span><br><span class=\"line\">./frps -c ./frps.ini</span><br><span class=\"line\"><span class=\"comment\">#使用nohup后台挂起服务并记录日志</span></span><br><span class=\"line\"><span class=\"built_in\">nohup</span> ./frps -c frps.ini &gt; ./frps.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">关闭frp</span><br><span class=\"line\"></span><br><span class=\"line\">ps -ef | grep frp   //查看进程pid号</span><br><span class=\"line\"><span class=\"built_in\">kill</span> -9 pid号       //杀死进程</span><br></pre></td></tr></table></figure>\n\n<p>3.frp服务配置服务,并设置开机自启<br>3.1建立启动脚本编写sh文件</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /frp/frp_0.49.0_linux_amd64/</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;pwd&#x27;</span>|<span class=\"built_in\">nohup</span> ./frps -c frps.ini &gt; ./frps.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">将sh文件与frp服务放一起,命名为frp.sh</span><br><span class=\"line\"></span><br><span class=\"line\">root@vultr:/frp/frp_0.49.0_linux_amd64<span class=\"comment\"># pwd</span></span><br><span class=\"line\">/frp/frp_0.49.0_linux_amd64</span><br><span class=\"line\">root@vultr:/frp/frp_0.49.0_linux_amd64<span class=\"comment\"># ls</span></span><br><span class=\"line\">frpc  frpc_full.ini  frpc.ini  frps  frps_full.ini  frp.sh  frps.ini  frps.log  LICENSE</span><br><span class=\"line\">给frp.sh 添加 可执行权限</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> +x frp.sh</span><br></pre></td></tr></table></figure>\n\n<p>3.2配置frp.service文件</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /usr/lib/systemd/system/frp.service</span><br><span class=\"line\">注意ExecStart路径为自己本地的</span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=npc</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/frp/frp_0.49.0_linux_amd64/frp.sh</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">RestartSec=5</span><br><span class=\"line\">PrivateTmp=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n<p>启动并测试</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload    //使能服务生效</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> frp       //配置开机自启</span><br><span class=\"line\">systemctl start frp        //启动服务</span><br><span class=\"line\">systemctl status frp       //查看服务状态</span><br><span class=\"line\">systemctl stop frp         //关闭服务</span><br></pre></td></tr></table></figure>\n\n<p>1.2.docker部署<br>1.2.1.debian、ubuntu、Centos系统一键安装docker</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL get.docker.com -o get-docker.sh</span><br><span class=\"line\">curl -sSL https://get.daocloud.io/docker | sh</span><br><span class=\"line\">sudo sh get-docker.sh --mirror Aliyun</span><br></pre></td></tr></table></figure>\n\n<p>1.2.2.创建frp.toml文件并创建目录</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /frp</span><br><span class=\"line\">vim /frp/frps.toml</span><br></pre></td></tr></table></figure>\n\n<p>编辑frps.toml配置文件</p>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">bindAddr</span> = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">bindPort</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">webServer.addr</span> = <span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.port</span> = <span class=\"number\">7500</span></span><br><span class=\"line\"><span class=\"attr\">webServer.user</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.password</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.certFile = &quot;server.crt&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.keyFile = &quot;server.key&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># dashboard assets directory(only for debug mode)</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.assetsDir = &quot;./static&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># enablePrometheus will export prometheus metrics on webServer in /metrics api.</span></span><br><span class=\"line\"><span class=\"attr\">enablePrometheus</span> = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># console or real logFile path like ./frps.log</span></span><br><span class=\"line\"><span class=\"comment\">#log.to = &quot;./frps.log&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># trace, debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log.level</span> = <span class=\"string\">&quot;info&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.maxDays</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\"># disable log colors when log.to is console, default is false</span></span><br><span class=\"line\"><span class=\"attr\">log.disablePrintColor</span> = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">auth.method</span> = <span class=\"string\">&quot;token&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># auth token</span></span><br><span class=\"line\"><span class=\"attr\">auth.token</span> = <span class=\"string\">&quot;12345678&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Max ports can be used for each client, default value is 0 means no limit</span></span><br><span class=\"line\"><span class=\"attr\">maxPortsPerClient</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">subDomainHost</span> = <span class=\"string\">&quot;frps.com&quot;</span></span><br><span class=\"line\"><span class=\"attr\">udpPacketSize</span> = <span class=\"number\">1500</span></span><br></pre></td></tr></table></figure>\n\n<p>1.2.3.拉取镜像</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull snowdreamtech/frps:latest</span><br></pre></td></tr></table></figure>\n\n<p>1.2.4. 启动docker容器</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --restart=always --network host -d -v /frp/frps.toml:/etc/frp/frps.toml --name frps snowdreamtech/frps</span><br></pre></td></tr></table></figure>\n\n<p>1.2.5 docker相关命令</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a             //查看运行中的容器</span><br><span class=\"line\">docker restart dockerID  //重启镜像</span><br><span class=\"line\">docker stop dockerID     //停止镜像</span><br><span class=\"line\">docker start dockerID    //启动镜像</span><br><span class=\"line\">docker <span class=\"built_in\">rm</span> dockerID       //删除镜像</span><br></pre></td></tr></table></figure>\n\n<p>1.2.6 配置docker自启,并镜像自动启动</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker                    //配置docker自启</span><br><span class=\"line\"> docker ps -a                               //查看docker ID</span><br><span class=\"line\"> docker update --restart=always dockerID    //配置镜像自启</span><br></pre></td></tr></table></figure>\n<p>1.2 frpc </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /frp</span><br><span class=\"line\">vim /frp/frps.toml</span><br></pre></td></tr></table></figure>\n\n<p>编辑frps.toml配置文件</p>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">bindAddr</span> = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">bindPort</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">webServer.addr</span> = <span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.port</span> = <span class=\"number\">7001</span></span><br><span class=\"line\"><span class=\"attr\">webServer.user</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.password</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.certFile = &quot;server.crt&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.keyFile = &quot;server.key&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># dashboard assets directory(only for debug mode)</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.assetsDir = &quot;./static&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># enablePrometheus will export prometheus metrics on webServer in /metrics api.</span></span><br><span class=\"line\"><span class=\"attr\">enablePrometheus</span> = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># console or real logFile path like ./frps.log</span></span><br><span class=\"line\"><span class=\"comment\">#log.to = &quot;./frps.log&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># trace, debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log.level</span> = <span class=\"string\">&quot;info&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.maxDays</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\"># disable log colors when log.to is console, default is false</span></span><br><span class=\"line\"><span class=\"attr\">log.disablePrintColor</span> = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">auth.method</span> = <span class=\"string\">&quot;token&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># auth token</span></span><br><span class=\"line\"><span class=\"attr\">auth.token</span> = <span class=\"string\">&quot;12345678&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Max ports can be used for each client, default value is 0 means no limit</span></span><br><span class=\"line\"><span class=\"attr\">maxPortsPerClient</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">subDomainHost</span> = <span class=\"string\">&quot;frps.com&quot;</span></span><br><span class=\"line\"><span class=\"attr\">udpPacketSize</span> = <span class=\"number\">1500</span></span><br></pre></td></tr></table></figure>\n\n<p>1.2.3.拉取镜像</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull snowdreamtech/frps:latest</span><br></pre></td></tr></table></figure>\n\n<p>1.2.4. 启动docker容器</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --restart=always --network host -d -v /frp/frpc.toml:/etc/frp/frpc.toml --name frpc snowdreamtech/frpc</span><br></pre></td></tr></table></figure>\n\n<p>1.2.4.命令行运行</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.\\frpc.exe -c .\\frpc.toml</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">user</span> = <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">serverAddr</span> = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">serverPort</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">loginFailExit</span> = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#log.to = &quot;./frpc.log&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.level</span> = <span class=\"string\">&quot;info&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.maxDays</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">log.disablePrintColor</span> = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">auth.method</span> = <span class=\"string\">&quot;token&quot;</span></span><br><span class=\"line\"><span class=\"attr\">auth.token</span> = <span class=\"string\">&quot;12345678&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Set admin address for control frpc&#x27;s action by http api such as reload</span></span><br><span class=\"line\"><span class=\"attr\">webServer.addr</span> = <span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.port</span> = <span class=\"number\">7005</span></span><br><span class=\"line\"><span class=\"attr\">webServer.user</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.password</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># includes = [&quot;./confd/*.ini&quot;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[[proxies]]</span></span><br><span class=\"line\"><span class=\"attr\">name</span> = <span class=\"string\">&quot;ssh&quot;</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = <span class=\"string\">&quot;tcp&quot;</span></span><br><span class=\"line\"><span class=\"attr\">localIP</span> = <span class=\"string\">&quot;10.11.150.5&quot;</span></span><br><span class=\"line\"><span class=\"attr\">localPort</span> = <span class=\"number\">34521</span></span><br><span class=\"line\"><span class=\"attr\">remotePort</span> = <span class=\"number\">7004</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[[proxies]]</span></span><br><span class=\"line\"><span class=\"attr\">name</span> = <span class=\"string\">&quot;plugin_socks5&quot;</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = <span class=\"string\">&quot;tcp&quot;</span></span><br><span class=\"line\"><span class=\"attr\">remotePort</span> = <span class=\"number\">7003</span></span><br><span class=\"line\"><span class=\"section\">[proxies.plugin]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = <span class=\"string\">&quot;socks5&quot;</span></span><br><span class=\"line\"><span class=\"attr\">username</span> = <span class=\"string\">&quot;abc&quot;</span></span><br><span class=\"line\"><span class=\"attr\">password</span> = <span class=\"string\">&quot;abc&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","more":"<p>frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。 可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。</p>\n<p>通过在具有公网 IP 的节点上部署 frp 服务端，可以轻松地将内网服务穿透到公网，同时提供诸多专业的功能特性，这包括：</p>\n<p>1.客户端服务端通信支持 TCP、KCP 以及 Websocket 等多种协议。<br>2.采用 TCP 连接流式复用，在单个连接间承载更多请求，节省连接建立时间。<br>3.代理组间的负载均衡。<br>4.端口复用，多个服务通过同一个服务端端口暴露。<br>5.多个原生支持的客户端插件（静态文件查看，HTTP、SOCK5 代理等），便于独立使用 frp 客户端完成某些工作。 6.高度扩展性的服务端插件系统，方便结合自身需求进行功能扩展。<br>7.服务端和客户端 UI 页面。</p>\n<p>网址:FRP github网址 frp下载:<a href=\"https://github.com/fatedier/frp/releases\">releases</a></p>\n<p>linux版本选择linux版本,windows端可以下载windows版本，服务器和客户端尽量保持版本一致，当前最新版本为0.49.0</p>\n<p>1.服务端部署<br>1.1.linux部署<br>1.1.1 创建frp目录</p>\n<p><code>mkdir frp</code></p>\n<p>1.1.2 创建一个frp目录后,进入该目录，使用如下命令</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> frp</span><br><span class=\"line\">//进入创建的frp目录</span><br><span class=\"line\"></span><br><span class=\"line\">wget https://github.com/fatedier/frp/releases/download/v0.49.0/frp_0.52.3_linux_amd64.tar.gz</span><br><span class=\"line\">//下载frp0.49版本服务端软件包</span><br><span class=\"line\"><span class=\"comment\">#若无wget命令,CentOS运行</span></span><br><span class=\"line\">yum install -y wget          //安装wget软件</span><br><span class=\"line\"><span class=\"comment\">#ubuntu或debian</span></span><br><span class=\"line\">apt install -y wget           //安装wget软件</span><br></pre></td></tr></table></figure>\n\n<p>1.1.3解压文件并进入解压文件夹</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -zxvf frp_0.52.3_linux_amd64.tar.gz  //解压文件</span><br><span class=\"line\"><span class=\"built_in\">cd</span>  frp_0.52.3_linux_amd64    </span><br><span class=\"line\">//进入解压文件夹</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#编辑frps.ini文件</span></span><br><span class=\"line\">vim frps.ini                             //编辑frps.ini文件</span><br><span class=\"line\">编辑以下内容</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>修改</li>\n</ul>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">[common]</span></span><br><span class=\"line\"><span class=\"attr\">bind_port</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"comment\"># 启用面板</span></span><br><span class=\"line\"><span class=\"attr\">dashboard_port</span> = <span class=\"number\">7500</span></span><br><span class=\"line\"><span class=\"comment\"># 面板登录名和密码</span></span><br><span class=\"line\"><span class=\"attr\">dashboard_user</span> = admin</span><br><span class=\"line\"><span class=\"attr\">dashboard_pwd</span> = xxxxxx</span><br><span class=\"line\"><span class=\"comment\"># 使用http代理并使用80端口进行穿透</span></span><br><span class=\"line\"><span class=\"attr\">vhost_http_port</span> = <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"comment\"># 使用https代理并使用443端口进行穿透</span></span><br><span class=\"line\"><span class=\"attr\">vhost_https_port</span> = <span class=\"number\">443</span></span><br><span class=\"line\"><span class=\"comment\"># 日志路径</span></span><br><span class=\"line\"><span class=\"attr\">log_file</span> = ./frps.log</span><br><span class=\"line\"><span class=\"comment\"># 日志级别</span></span><br><span class=\"line\"><span class=\"attr\">log_level</span> = info</span><br><span class=\"line\"><span class=\"comment\"># 日志最大保存天数</span></span><br><span class=\"line\"><span class=\"attr\">log_max_days</span> = <span class=\"number\">7</span></span><br><span class=\"line\"><span class=\"comment\"># 认证超时时间</span></span><br><span class=\"line\"><span class=\"attr\">authentication_timeout</span> = <span class=\"number\">900</span></span><br><span class=\"line\"><span class=\"comment\"># 认证token，客户端需要和此对应</span></span><br><span class=\"line\"><span class=\"attr\">token</span>=<span class=\"number\">123123123</span></span><br><span class=\"line\"><span class=\"comment\"># 最大连接数</span></span><br><span class=\"line\"><span class=\"attr\">max_pool_count</span> = <span class=\"number\">5</span></span><br><span class=\"line\"><span class=\"attr\">max_ports_per_client</span> = <span class=\"number\">0</span></span><br></pre></td></tr></table></figure>\n\n<p>1.1.5开放防火墙相关端口</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CentOS系统开放端口命令(云服务器也需要在安全组加入对应端口):</span><br><span class=\"line\"></span><br><span class=\"line\">firewall-cmd --zone=public --add-port=7000/tcp --permanent   //开放7000端口</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=7500/tcp --permanent   //开放7500端口</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=80/tcp --permanent     //开放80端口</span><br><span class=\"line\">firewall-cmd --zone=public --add-port=443/tcp --permanent    //开放443端口</span><br><span class=\"line\">firewall-cmd --reload                                        //使能防火墙生效</span><br><span class=\"line\">ubuntu或debian系统:</span><br><span class=\"line\"></span><br><span class=\"line\">ufw allow 80                 //开启80端口</span><br><span class=\"line\">ufw allow 443                //开启443端口</span><br><span class=\"line\">ufw allow 7000               //开启7000端口</span><br><span class=\"line\">ufw allow 7500               //开启7500端口</span><br><span class=\"line\">ufw <span class=\"built_in\">enable</span>                   //启动防火墙           </span><br><span class=\"line\">ufw <span class=\"built_in\">disable</span>                  //关闭防火墙</span><br></pre></td></tr></table></figure>\n\n<p>1.1.6启动服务几种方式</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#正常启动</span></span><br><span class=\"line\">./frps -c ./frps.ini</span><br><span class=\"line\"><span class=\"comment\">#使用nohup后台挂起服务并记录日志</span></span><br><span class=\"line\"><span class=\"built_in\">nohup</span> ./frps -c frps.ini &gt; ./frps.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">关闭frp</span><br><span class=\"line\"></span><br><span class=\"line\">ps -ef | grep frp   //查看进程pid号</span><br><span class=\"line\"><span class=\"built_in\">kill</span> -9 pid号       //杀死进程</span><br></pre></td></tr></table></figure>\n\n<p>3.frp服务配置服务,并设置开机自启<br>3.1建立启动脚本编写sh文件</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /frp/frp_0.49.0_linux_amd64/</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&#x27;pwd&#x27;</span>|<span class=\"built_in\">nohup</span> ./frps -c frps.ini &gt; ./frps.log 2&gt;&amp;1 &amp;</span><br><span class=\"line\">将sh文件与frp服务放一起,命名为frp.sh</span><br><span class=\"line\"></span><br><span class=\"line\">root@vultr:/frp/frp_0.49.0_linux_amd64<span class=\"comment\"># pwd</span></span><br><span class=\"line\">/frp/frp_0.49.0_linux_amd64</span><br><span class=\"line\">root@vultr:/frp/frp_0.49.0_linux_amd64<span class=\"comment\"># ls</span></span><br><span class=\"line\">frpc  frpc_full.ini  frpc.ini  frps  frps_full.ini  frp.sh  frps.ini  frps.log  LICENSE</span><br><span class=\"line\">给frp.sh 添加 可执行权限</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">chmod</span> +x frp.sh</span><br></pre></td></tr></table></figure>\n\n<p>3.2配置frp.service文件</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /usr/lib/systemd/system/frp.service</span><br><span class=\"line\">注意ExecStart路径为自己本地的</span><br><span class=\"line\"></span><br><span class=\"line\">[Unit]</span><br><span class=\"line\">Description=npc</span><br><span class=\"line\">After=network.target</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=forking</span><br><span class=\"line\">ExecStart=/frp/frp_0.49.0_linux_amd64/frp.sh</span><br><span class=\"line\">Restart=always</span><br><span class=\"line\">RestartSec=5</span><br><span class=\"line\">PrivateTmp=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>\n<p>启动并测试</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl daemon-reload    //使能服务生效</span><br><span class=\"line\">systemctl <span class=\"built_in\">enable</span> frp       //配置开机自启</span><br><span class=\"line\">systemctl start frp        //启动服务</span><br><span class=\"line\">systemctl status frp       //查看服务状态</span><br><span class=\"line\">systemctl stop frp         //关闭服务</span><br></pre></td></tr></table></figure>\n\n<p>1.2.docker部署<br>1.2.1.debian、ubuntu、Centos系统一键安装docker</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL get.docker.com -o get-docker.sh</span><br><span class=\"line\">curl -sSL https://get.daocloud.io/docker | sh</span><br><span class=\"line\">sudo sh get-docker.sh --mirror Aliyun</span><br></pre></td></tr></table></figure>\n\n<p>1.2.2.创建frp.toml文件并创建目录</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /frp</span><br><span class=\"line\">vim /frp/frps.toml</span><br></pre></td></tr></table></figure>\n\n<p>编辑frps.toml配置文件</p>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">bindAddr</span> = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">bindPort</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">webServer.addr</span> = <span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.port</span> = <span class=\"number\">7500</span></span><br><span class=\"line\"><span class=\"attr\">webServer.user</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.password</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.certFile = &quot;server.crt&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.keyFile = &quot;server.key&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># dashboard assets directory(only for debug mode)</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.assetsDir = &quot;./static&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># enablePrometheus will export prometheus metrics on webServer in /metrics api.</span></span><br><span class=\"line\"><span class=\"attr\">enablePrometheus</span> = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># console or real logFile path like ./frps.log</span></span><br><span class=\"line\"><span class=\"comment\">#log.to = &quot;./frps.log&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># trace, debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log.level</span> = <span class=\"string\">&quot;info&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.maxDays</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\"># disable log colors when log.to is console, default is false</span></span><br><span class=\"line\"><span class=\"attr\">log.disablePrintColor</span> = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">auth.method</span> = <span class=\"string\">&quot;token&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># auth token</span></span><br><span class=\"line\"><span class=\"attr\">auth.token</span> = <span class=\"string\">&quot;12345678&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Max ports can be used for each client, default value is 0 means no limit</span></span><br><span class=\"line\"><span class=\"attr\">maxPortsPerClient</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">subDomainHost</span> = <span class=\"string\">&quot;frps.com&quot;</span></span><br><span class=\"line\"><span class=\"attr\">udpPacketSize</span> = <span class=\"number\">1500</span></span><br></pre></td></tr></table></figure>\n\n<p>1.2.3.拉取镜像</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull snowdreamtech/frps:latest</span><br></pre></td></tr></table></figure>\n\n<p>1.2.4. 启动docker容器</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --restart=always --network host -d -v /frp/frps.toml:/etc/frp/frps.toml --name frps snowdreamtech/frps</span><br></pre></td></tr></table></figure>\n\n<p>1.2.5 docker相关命令</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a             //查看运行中的容器</span><br><span class=\"line\">docker restart dockerID  //重启镜像</span><br><span class=\"line\">docker stop dockerID     //停止镜像</span><br><span class=\"line\">docker start dockerID    //启动镜像</span><br><span class=\"line\">docker <span class=\"built_in\">rm</span> dockerID       //删除镜像</span><br></pre></td></tr></table></figure>\n\n<p>1.2.6 配置docker自启,并镜像自动启动</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl <span class=\"built_in\">enable</span> docker                    //配置docker自启</span><br><span class=\"line\"> docker ps -a                               //查看docker ID</span><br><span class=\"line\"> docker update --restart=always dockerID    //配置镜像自启</span><br></pre></td></tr></table></figure>\n<p>1.2 frpc </p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">mkdir</span> /frp</span><br><span class=\"line\">vim /frp/frps.toml</span><br></pre></td></tr></table></figure>\n\n<p>编辑frps.toml配置文件</p>\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">bindAddr</span> = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">bindPort</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">webServer.addr</span> = <span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.port</span> = <span class=\"number\">7001</span></span><br><span class=\"line\"><span class=\"attr\">webServer.user</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.password</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.certFile = &quot;server.crt&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.tls.keyFile = &quot;server.key&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># dashboard assets directory(only for debug mode)</span></span><br><span class=\"line\"><span class=\"comment\"># webServer.assetsDir = &quot;./static&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># enablePrometheus will export prometheus metrics on webServer in /metrics api.</span></span><br><span class=\"line\"><span class=\"attr\">enablePrometheus</span> = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># console or real logFile path like ./frps.log</span></span><br><span class=\"line\"><span class=\"comment\">#log.to = &quot;./frps.log&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># trace, debug, info, warn, error</span></span><br><span class=\"line\"><span class=\"attr\">log.level</span> = <span class=\"string\">&quot;info&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.maxDays</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"comment\"># disable log colors when log.to is console, default is false</span></span><br><span class=\"line\"><span class=\"attr\">log.disablePrintColor</span> = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">auth.method</span> = <span class=\"string\">&quot;token&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># auth token</span></span><br><span class=\"line\"><span class=\"attr\">auth.token</span> = <span class=\"string\">&quot;12345678&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Max ports can be used for each client, default value is 0 means no limit</span></span><br><span class=\"line\"><span class=\"attr\">maxPortsPerClient</span> = <span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"attr\">subDomainHost</span> = <span class=\"string\">&quot;frps.com&quot;</span></span><br><span class=\"line\"><span class=\"attr\">udpPacketSize</span> = <span class=\"number\">1500</span></span><br></pre></td></tr></table></figure>\n\n<p>1.2.3.拉取镜像</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull snowdreamtech/frps:latest</span><br></pre></td></tr></table></figure>\n\n<p>1.2.4. 启动docker容器</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --restart=always --network host -d -v /frp/frpc.toml:/etc/frp/frpc.toml --name frpc snowdreamtech/frpc</span><br></pre></td></tr></table></figure>\n\n<p>1.2.4.命令行运行</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.\\frpc.exe -c .\\frpc.toml</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight toml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">user</span> = <span class=\"string\">&quot;root&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">serverAddr</span> = <span class=\"string\">&quot;0.0.0.0&quot;</span></span><br><span class=\"line\"><span class=\"attr\">serverPort</span> = <span class=\"number\">7000</span></span><br><span class=\"line\"><span class=\"attr\">loginFailExit</span> = <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\">#log.to = &quot;./frpc.log&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.level</span> = <span class=\"string\">&quot;info&quot;</span></span><br><span class=\"line\"><span class=\"attr\">log.maxDays</span> = <span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"attr\">log.disablePrintColor</span> = <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">auth.method</span> = <span class=\"string\">&quot;token&quot;</span></span><br><span class=\"line\"><span class=\"attr\">auth.token</span> = <span class=\"string\">&quot;12345678&quot;</span></span><br><span class=\"line\"><span class=\"comment\"># Set admin address for control frpc&#x27;s action by http api such as reload</span></span><br><span class=\"line\"><span class=\"attr\">webServer.addr</span> = <span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.port</span> = <span class=\"number\">7005</span></span><br><span class=\"line\"><span class=\"attr\">webServer.user</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"><span class=\"attr\">webServer.password</span> = <span class=\"string\">&quot;admin&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># includes = [&quot;./confd/*.ini&quot;]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[[proxies]]</span></span><br><span class=\"line\"><span class=\"attr\">name</span> = <span class=\"string\">&quot;ssh&quot;</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = <span class=\"string\">&quot;tcp&quot;</span></span><br><span class=\"line\"><span class=\"attr\">localIP</span> = <span class=\"string\">&quot;10.11.150.5&quot;</span></span><br><span class=\"line\"><span class=\"attr\">localPort</span> = <span class=\"number\">34521</span></span><br><span class=\"line\"><span class=\"attr\">remotePort</span> = <span class=\"number\">7004</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">[[proxies]]</span></span><br><span class=\"line\"><span class=\"attr\">name</span> = <span class=\"string\">&quot;plugin_socks5&quot;</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = <span class=\"string\">&quot;tcp&quot;</span></span><br><span class=\"line\"><span class=\"attr\">remotePort</span> = <span class=\"number\">7003</span></span><br><span class=\"line\"><span class=\"section\">[proxies.plugin]</span></span><br><span class=\"line\"><span class=\"attr\">type</span> = <span class=\"string\">&quot;socks5&quot;</span></span><br><span class=\"line\"><span class=\"attr\">username</span> = <span class=\"string\">&quot;abc&quot;</span></span><br><span class=\"line\"><span class=\"attr\">password</span> = <span class=\"string\">&quot;abc&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","categories":[{"name":"软件技术","path":"api/categories/软件技术.json"}],"tags":[{"name":"软件","path":"api/tags/软件.json"}]}